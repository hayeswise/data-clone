/**
 * wise-dataClone
 * @author Brian S Hayes ("Hayeswise")
 * @license MIT License, Copyright (c) 2017 Brian S Hayes ("Hayeswise")
 * @see {@link https://github.com/hayeswise/data-clone}
 */
(function(exports){"use strict";if(typeof exports.WISE!=="function"){exports.WISE=function(){};}
var WISE=exports.WISE;WISE.dataClone=function(){function dataClone(obj,depth,refs){var copy=obj;var curObjMoniker;var keys;if(typeof dataClone.MAX_DEPTH!=="number"||dataClone.MAX_DEPTH<1){console.warn("Invalid value for dataClone.MAX_DEPTH ("+dataClone.MAX_DEPTH+"). Will use the default value.");dataClone.MAX_DEPTH=5;}
if(refs===undefined){refs=new Map();curObjMoniker=dataClone.SELF;refs.set(obj,curObjMoniker);}else{curObjMoniker=refs.get(obj);}
if(!depth||depth<1){depth=1;}
if(depth>dataClone.MAX_DEPTH){if(obj!==undefined&&typeof obj==="object"){switch(Object.prototype.toString.call(obj)){case"[object Date]":return obj.toISOString();case"[object RegExp]":return obj.toString();case"[object Error]":return{name:obj.name,message:obj.message};default:return dataClone.OBJECT_REFERENCE_FORMAT.replace("%s",refs.get(obj));}}else{return obj;}}
if(obj&&typeof obj==="object"){switch(Object.prototype.toString.call(obj)){case"[object Date]":copy=obj.toISOString();break;case"[object RegExp]":copy=obj.toString();break;case"[object Error]":copy={name:obj.name,message:obj.message};break;default:copy=(Object.prototype.toString.call(obj)==="[object Array]")?[]:Object.create(null);keys=Object.keys(obj);keys.forEach(function(name){var ignoreThis;ignoreThis=dataClone.IGNORE_TYPES.some(function(type){return(type===typeof copy[name]);})||dataClone.IGNORE_PROPERTY_NAMES.some(function(regexp){return(new RegExp(regexp).test(name));});if(!ignoreThis){if(!refs.has(obj[name])){refs.set(obj[name],refs.get(obj)+"."+name);}
copy[name]=dataClone(obj[name],(depth+1),refs);}});}}
return copy;}
dataClone.MAX_DEPTH=4;dataClone.IGNORE_TYPES=["function"];dataClone.IGNORE_PROPERTY_NAMES=[/^_/];dataClone.OBJECT_REFERENCE_FORMAT="{object:%s}";dataClone.SELF="self";return dataClone;}();}((typeof window!=='undefined'&&Object.prototype.toString.call(window)==='[object Window]')?window:exports));